# Region-Specific PDF Question Answering System (LangChain + LLM Retrieval)

## Overview

This project demonstrates an **LLM-powered system for answering questions from regional PDF documents** using LangChain.  
It leverages OpenAI models to first detect the relevant region, loads and splits only the corresponding PDF, and uses vector-based semantic retrieval to find and present answers.

---

## Key Features

- **Smart Region Extraction:**  
  Uses a Large Language Model (LLM) to extract the region name directly from the user's question.
- **Targeted PDF Loading:**  
  Only loads and processes the PDF associated with the detected region, optimizing performance and cost.
- **Vectorized Semantic Search:**  
  Splits the PDF into chunks, embeds them, and retrieves the most relevant context using [Chroma](https://www.trychroma.com/) as the vector store.
- **LLM-Powered Q&A:**  
  Uses OpenAI's GPT model to synthesize a natural language answer, with support for markdown tables when appropriate.
- **Fail-Safe:**  
  Gracefully handles unknown or ambiguous regions, and avoids hallucinations by telling the user when it doesn't know the answer.

---

## How It Works

1. **User Input:**  
   The user provides a question about any supported region.
2. **Region Detection:**  
   An LLM-powered chain extracts the region name (e.g., "US", "Europa", etc.) from the question.
3. **Dynamic PDF Loading:**  
   The script loads only the PDF file that matches the detected region.
4. **Text Splitting & Embedding:**  
   The PDF is split into overlapping chunks, embedded using OpenAI embeddings, and indexed with Chroma.
5. **Retrieval and Answer Generation:**  
   The most relevant chunks are retrieved, and a final answer is generated by GPT, using the context only.
6. **Output:**  
   The system prints the answer (including tables in markdown if requested) or explains when no answer is found.

---

## Project Structure

├── tari.py # Main script (LangChain retrieval pipeline)
├── pdf/ # Folder containing regional PDF files (not included)
│ ├── m_lac_inc_customer_en-us 1.pdf
│ ├── m_us_inc_customer_en-us 1.pdf
│ ├── m_can_inc_en-us 1.pdf
│ ├── m_eur_inc_customer_en-us 1.pdf
│ ├── m_ap_inc_customer_en-us 1.pdf
│ └── m_mea_inc_customer_en-us 1.pdf
├── .env # Environment variables (OpenAI API key, etc.)
└── requirements.txt # Python dependencies

---

## Installation

1. **Clone the repository**
```bash
git clone <repo_url>
cd <repo_folder>
```

2. Install dependencies
```bash
pip install -r requirements.txt
```
3. Add PDF documents
Place your region-specific PDF files in the pdf/ directory.

4. Configure environment
Add your OpenAI API key and any necessary credentials to a .env file.

---

## Usage
- question = "what is the World(USD) for Full UCAF Group for IRD 53 for the US region mastercard consumer credit rates."
- The system will output the answer or notify if the region is unknown or the answer is not found.

---

## Customization
- Support for more regions:
Add the desired PDF file(s) to the pdf/ directory.
- Change the model:
Set model_name in ChatOpenAI or other parameters as needed.
- Prompt engineering:
Adapt the answer synthesis prompt in the code for different answer formats or styles.
---

## Project Structure

